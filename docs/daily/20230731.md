# 2023-07-31  多主题切换方案

## 方案一：link标签css动态引入
::: tip
:tada:
提前准备好几套css主题样式文件，在需要的时候，通过动态创建link标签到head中，或者是改变href的属性
:::
| 优点                            | 缺点                                                              |
| :------------------------------- |:-------------------------------------------------------------------| 
|实现了按需加载，提高首屏加载时的速度| 动态加载样式文件，如果文件过大&&网络不佳时会加载延迟，导致样式切换不刘畅| 
|-                                | 各个主题样式是分开写死的，后续针对某一主题样式更改或者新增很麻烦        | 


## 方案二：css类名切换
::: tip
:100:
和方案一比较类似，提前将样式全部引入，在需要切换主题的时候指定根元素的类名更换，直接做样式覆盖
:::

| 优点                               | 缺点                              |
| :-------------------------------- | :-------------------------------- |
| 不用重复加载样式文件，样式切换不会有卡顿 | 会牺牲首屏加载的时间来加载样式资源 |
| -                                 | 样式表内定义不当，会有优先级的问题  |
| -                                 | 样式是一起写死的，修改主题麻烦      |



> 总结：基于上面的问题，需要优化怎么保证在后续的持续开发迭代中怎样会更方便。因此我们还可以基于以上存在的问题和方案做进一步的增强。


## 方案三：Ant Design Pro主题切换原理
::: tip
1. Antd Pro采用了动态更改 css 文件链接的方法来实现主题的变更
2. 组件库样式的变更，主要归功于Antd本身样式出色的设计，非常好抽取
:::

### Antd色板的出色设计
#### themes目录
```
|-- themes
  |-- compact.less
  |-- dark.less
  |-- default.less
  |-- index.less
```
>themes是定义主题的地方，Antd默认提供三套主题，default，dark和compact。文件中定义了大量的变量

``` less
// color.less
@blue-base: #1890ff;
@blue-1: color(~`colorPalette('@{blue-6}', 1) `);
@blue-2: color(~`colorPalette('@{blue-6}', 2) `);
@blue-3: color(~`colorPalette('@{blue-6}', 3) `);
@blue-4: color(~`colorPalette('@{blue-6}', 4) `);
@blue-5: color(~`colorPalette('@{blue-6}', 5) `);
@blue-6: @blue-base;
@blue-7: color(~`colorPalette('@{blue-6}', 7) `);
@blue-8: color(~`colorPalette('@{blue-6}', 8) `);
@blue-9: color(~`colorPalette('@{blue-6}', 9) `);
@blue-10: color(~`colorPalette('@{blue-6}', 10) `);
```

``` less
// default.less
@import '../color/colors';  

@theme: default;

@primary-color: @blue-6;
@info-color: @primary-color;
@success-color: @green-6;
@processing-color: @blue-6;
@error-color: @red-5;
...
@font-feature-settings-base: 'tnum';
@font-size-base: 14px;
@font-size-lg: @font-size-base + 2px;
@font-size-sm: 12px;
```




